<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>3 a.m. Lamp</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="images/favicon.ico">
    <link href="fonts/iconfont/iconfont.css" rel="stylesheet" type="text/css">
    <link href="//cdn.bootcss.com/semantic-ui/2.2.2/components/icon.css" rel="stylesheet">
    <link href="//cdn.bootcss.com/semantic-ui/2.2.2/components/grid.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/screen.css"/>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
</head>
<body>
<div class="main">
  <div class="logo-container">
  <div id="danmu"></div>
  </div>
  <div class="info-container">
      <div class="info-content">
      <img class="info-avatar" src="images/jugg.jpeg">
      <div class="info-link">
        <a id="danmu-input" class="info-icon extra"><i class="comments icon"></i></a>
        <a class="info-icon extra" href="/babble"><i class="puzzle icon"></i></a>
        <a class="info-icon extra" href="/dubhe" target="_blank"><i class="marker icon"></i></a>
        <a class="info-icon" href="/bit"><i class="code icon"></i></a>
        <div style="width: 100px; height: 100px; float: left; margin: 0 20px;"></div>
        <a class="info-icon" href="http://blink-dagger.com:8555" target="_blank"><i class="film icon"></i></a>
        <a class="info-icon extra" href="http://blink-dagger.com:1990" target="_blank"><i class="iconfont python"></i></a>
        <a class="info-icon extra" href="http://blink-dagger.com:2009" target="_blank"><i class="iconfont Rlogo"></i></a>
        <a class="info-icon extra" href="http://blink-dagger.com:2013" target="_blank"><i class="iconfont mongodb"></i></a>
      </div>
      </div>
  </div>
  </div>
  <script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="js/jquery.danmu.js"></script>
  <script type="text/javascript">
    $("#danmu").danmu({
      height:'100%',
      width:'100%',
      left:0,
      top:5,
      right:0,
      danmuLoop:true,
      zindex :2,
      speed:10000
    });
    $(document).ready(function(){  
      var Getdanmu = function() {
        $.ajax({
            method: "GET",
            dataType: 'jsonp',
            crossOrigin: true,
            async: false,
            jsonpCallback: 'callback',
            data: {"danmu_collection":"Blog","max_danmu_id":0},
            url:"http://blink-dagger.com:8555/danmu",
            success:function(data){
              console.log($('#danmu').data("nowTime"));
              var danmuss = data['danmuss'];
              for (var i = 0; i < danmuss.length; i++) {
                try {
                    var danmuLs = JSON.parse(danmuss[i]);
                } catch (e) {
                    continue;
                }
                $("#danmu").danmu("addDanmu",danmuLs);
              }
            }
        });
      };
      Getdanmu();
      $('#danmu').danmu('danmuStart');
      var refresh = function() {
        $('#danmu').data("nowTime",0);
      }
      var sync = setInterval(refresh, 15000);
      $(".info-avatar").click(
        function () { 
            $('.logo-container').toggleClass("switch");
            $('#danmu').toggle();
            if($('#danmu').data("paused")){
                $('#danmu').danmu('danmuResume');
              }
            else{
                $('#danmu').danmu('danmuPause');
              }
          }
        );
    });
  </script>
</body>
</html>
